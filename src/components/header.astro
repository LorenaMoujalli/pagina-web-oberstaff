---
import "../styles/header.css";   
import logo from "../assets/logo.png";
/*
import iconoHam from "../assets/icono-hamburguesa.png";
import iconoConv from "../assets/icono-contacto.png";
*/ 
---

<header class="header">
  <div class="container">
    <div class="header-content">
      <a href="#" class="logo">
        <img src={logo.src} alt="Logo" /> 
      </a> 

      <nav class="nav-links">
        <a href="/#que-hacemos">¿Qué hacemos?</a>
        <a href="/#como-funciona">¿Cómo funciona?</a>
        <a href="/#testimonios">Testimonios</a>
        <a href="/#preguntas-frecuentes">Preguntas frecuentes</a>
        <a href="/#contacto">Contacto</a>
        <a href="https://oberstaff.com/blog">Blog</a>
        <a href="/empleos">¿Buscas trabajo?</a>
      </nav>
 
      <!-- Botón contacto -->
      <button id="openContactBtn" class="menu-btn contact-btn" aria-label="Abrir contacto">
        <span class="iconify" data-icon="mdi:comment-outline" style="font-size:25px;"></span>
        <!--
        <img src={iconoConv.src} alt="Contacto" /> -->
      </button>

      <!-- Botón hamburguesa -->
      <button id="openMenuBtn" class="menu-btn ham-btn" aria-label="Abrir menú">
        <span class="iconify" data-icon="material-symbols:density-medium-rounded" style="font-size:25px;"></span>
        <!-- 
        <img src={iconoHam.src} alt="Abrir menú" />-->
      </button>
    </div>
  </div>
</header>

<!--  MODAL MENÚ -->
<div id="menuModal" class="menu-modal">
  <div class="modal-backdrop" id="modalBackdropMenu"></div>
  <div class="modal-content">
    <div class="modal-header">
      <img src={logo.src} alt="Logo" class="modal-logo" />
      <button id="closeMenuBtn" class="close-btn" aria-label="Cerrar">×</button>
    </div>

    <nav class="modal-links">
      <a href="#que-hacemos">¿Qué hacemos?</a>
      <a href="#como-funciona">¿Cómo funciona?</a>
      <a href="#testimonios">Testimonios</a>
      <a href="#preguntas-frecuentes">Preguntas frecuentes</a>
      <a href="#contacto">Contacto</a>
      <a href="#">Blog</a>
      <a href="/empleos">¿Buscas trabajo?</a>
    </nav>
  </div>
</div>

<!--MODAL CONTACTO -->
<div id="contactModal" class="menu-modal">
  <div class="modal-backdrop" id="modalBackdropContact"></div>
  <div class="modal-content contact-content">
    <div class="modal-header">
      <img src="" alt="" class="modal-logo" />
      <button id="closeContactBtn" class="close-btn" aria-label="Cerrar">×</button>
    </div>
 
    <h2>Envíanos <span class="mensaje">un mensaje</span></h2>
    <p>Envíanos tus dudas y te responderemos lo más pronto posible.</p>

    <form id="webhookFormModal" class="contact-form-modal">
      <input type="text" name="nombre" placeholder="Nombre y apellido" required />
      <input type="email" name="email" placeholder="Email" required />

      <div class="phone-group"> 
        <input type="text" name="codigoPais" placeholder="+XX" class="country-code" required />
        <input type="text" name="telefono" placeholder="Teléfono" class="phone-number" required />
      </div>

      <textarea name="mensaje" placeholder="Mensaje" rows="4" required></textarea>

      <button type="submit" class="btn-send">ENVIAR MENSAJE</button>
    </form>
  </div>
</div>




<script type="module">
  import { initHeader } from "../../src/scripts/header";  

  // Ejecutar solo cuando el DOM esté listo
  const runInit = () => initHeader();
  if (document.readyState === "loading") {
    window.addEventListener("DOMContentLoaded", runInit, { once: true });
  } else {
    runInit();
  }
</script>


<!-- 

<script type="module">

  // MENÚ MODAL
const openMenuBtn = document.getElementById("openMenuBtn");
const closeMenuBtn = document.getElementById("closeMenuBtn");
const menuModal = document.getElementById("menuModal");
const backdropMenu = document.getElementById("modalBackdropMenu");

// CONTACTO MODAL
const openContactBtn = document.getElementById("openContactBtn");
const closeContactBtn = document.getElementById("closeContactBtn");
const contactModal = document.getElementById("contactModal");
const backdropContact = document.getElementById("modalBackdropContact");

function openModal(modal) {
  modal.classList.add("show");
  document.body.style.overflow = "hidden";
}

function closeModal(modal) {
  modal.classList.remove("show");
  document.body.style.overflow = "";
}

// Eventos menú
openMenuBtn.addEventListener("click", () => openModal(menuModal));
closeMenuBtn.addEventListener("click", () => closeModal(menuModal));
backdropMenu.addEventListener("click", () => closeModal(menuModal));

// Eventos contacto
openContactBtn.addEventListener("click", () => openModal(contactModal));
closeContactBtn.addEventListener("click", () => closeModal(contactModal));
backdropContact.addEventListener("click", () => closeModal(contactModal));

// Cerrar con Escape
document.addEventListener("keydown", (e) => {
  if (e.key === "Escape") {
    closeModal(menuModal);
    closeModal(contactModal);
  }
});

// ---  NUEVO: Cerrar el menú al hacer clic en una opción ---
const menuLinks = document.querySelectorAll(".modal-links a");

menuLinks.forEach(link => {
  link.addEventListener("click", () => {
    closeModal(menuModal);
  });
});


</script>


-------------------------------------------------------

<script  type="module">

const WEBHOOK_URL = 'https://n8n.obertrack.com/webhook-test/contacto';   

// Seleccionar también el formulario del modal
const formModal = document.getElementById('webhookFormModal');

// Si existe el formulario del modal, le aplicamos el mismo comportamiento
if (formModal) {
  formModal.addEventListener('submit', async function (event) {
    event.preventDefault();

    statusModalText.textContent = 'Enviando...';
    statusModal.classList.add('show');
    document.body.style.overflow = 'hidden';

    const telefonoCompleto = formModal.codigoPais.value + formModal.telefono.value;

    const data = {
      nombres: formModal.nombre.value,
      apellidos: '', // no lo pide el modal
      email: formModal.email.value,
      telefono: telefonoCompleto,
      mensaje: formModal.mensaje.value
    };

    try {
      const response = await fetch(WEBHOOK_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      if (response.ok) {
        statusModalText.textContent = 'Datos enviados exitosamente';
        formModal.reset();
      } else {
        statusModalText.textContent = 'Error al enviar los datos. Código ' + response.status;
      }
    } catch (error) {
      statusModalText.textContent = 'Error de red o en la URL del Webhook: ' + error.message;
      console.error('Error:', error);
    }
  });
}

</script>

 
-->
